@startuml

state DisplayBall {
    [*] --> WaitEvent_B

    WaitEvent_B : Wait for wall event
    WaitEvent_B -> MoveBall : wallCreated

    MoveBall : Move the ball\naccording the tilt\nof the board
    MoveBall -up-> MoveBall : ball Inside\nThe Board\nAnd Did Not\nHit the Wall
    MoveBall --> EraseBall :  Ball Moved\nOutside The Board
    MoveBall --> WaitEvent_B : Ball\nHited\nThe wall

    EraseBall : Ball erasing
    EraseBall -up-> EraseBall : BallErasing
    EraseBall --> WaitEvent_B : BallErased

}

state DisplayWall {
    [*] --> CreateWall

    CreateWall : Create a wall on a random side
    CreateWall --> FixWall : wallCreated

    FixWall -up-> FixWall : timeout\nBefore\nWall Blinking\nIs Not Over
    FixWall --> BlinkWall : timeout\nBefore\nWall Blinking\nIs Over
    FixWall ->  WaitEvent_W :  Ball\nHited\nThe wall
    
    BlinkWall -up-> BlinkWall : wallBlinking
    BlinkWall --> EraseWall : timeout\nWall Blinking\nIs Over
    BlinkWall ->  WaitEvent_W :  Ball\nHited\nThe wall

    EraseWall -up-> EraseWall : wallErasing
    EraseWall --> WaitEvent_W : WallErased
    EraseWall ->  WaitEvent_W :  Ball\nHited\nThe wall

    WaitEvent_W : Wait for game event
    WaitEvent_W -> CreateWall : winAnimation\nIs Over
}

state Game {
    [*] --> WaitEvent_G

    WaitEvent_G : Wait for ball and wall events
    WaitEvent_G --> GameOverAnimation : WallErased
    WaitEvent_G --> GameOverAnimation : BallErased

    WaitEvent_G --> WinAnimation : Ball\nHited\nThe wall

    WinAnimation : Added points to the game score
    WinAnimation -up-> WinAnimation : winAnimation\nIs Not Over
    WinAnimation --> WaitEvent_G : winAnimation\nIs Over

    GameOverAnimation -up-> GameOverAnimation : gameOverAnimation\nIs Not Over
    GameOverAnimation --> DisplayScore : gameOverAnimation\nIs Over

    DisplayScore --> [*]
}

@enduml
